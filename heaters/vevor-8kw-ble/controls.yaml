switch:
  - id: !extend heater_power_switch
    lambda: |-
      return id(heater_burner_state).state;
    turn_on_action:
      - script.execute: heater_turn_on
    turn_off_action:
      - script.execute: heater_turn_off

select:
  - platform: template
    name: "Heater Control Mode"
    id: heater_control_mode
    optimistic: true
    options:
      - "Temperature"
      - "Power"
    initial_option: "Temperature"
    icon: "mdi:radiator"
    on_value:
      then:
        - if:
            condition:
              lambda: 'return id(heater_control_mode).current_option() == "Temperature";'
            then:
              - script.execute: set_heater_mode_temperature
            else:
              - script.execute: set_heater_mode_power

number:
  - id: !extend heater_control_target_temperature
    set_action:
      then:
        - script.execute:
            id: heater_set_temperature
            temperature: !lambda 'return x;'

  - id: !extend heater_control_target_power
    set_action:
      then:
        - script.execute:
            id: heater_set_power
            percentage: !lambda 'return x;'
